/*! jodo-widget 2016-12-16 */
var Table={_renderData:function(a,b){var c="",d="",e="",f=0,g="1",h=[];if(b.data instanceof Object&&b.data.sort.length>0){var i=b.data.head;console.log(i);for(var j=0;j<i.length;j++)c+="<th>"+i[j]+"</th>";a.innerHTML='<table id="'+b.id+'" class="display" cellspacing="0" width="100%"><thead><tr>'+c+"</tr></thead><tbody></tbody></table>",h=b.data.sort,f=b.data.page.recordCount,g=b.data.page.pageSize;for(var k=b.data.total,j=0;j<h.length;j++)d+="<td>"+k[h[j]]+"</td>";var l=b.data.page.resList;if(l instanceof Array&&l.length>0)for(var j=0;j<l.length;j++){for(var m="",n=0;n<h.length;n++)m+="<td>"+l[j][h[n]]+"</td>";e+="<tr>"+m+"</tr>"}$("#"+b.id).DataTable({order:[[1,"desc"]],pageLength:g+1,lengthChange:!1,searching:!1,language:{info:"总数："+f}})}else a.innerHTML='<div class="w_tableEmptyLoading">Table is loading...</div>'},init:function(){var a=this,b=Object.create(HTMLElement.prototype);b.createdCallback=function(){console.log("createdCallback");var b=this.getAttribute("data-id"),c=this.getAttribute("data-url");a._renderData(this,{id:b});var d=this;$.ajax({method:"GET",url:c,dataType:"json",contentType:"application/json",success:function(c){console.log("%csuccess","background: green; color: white;"),setTimeout(function(){a._renderData(d,{id:b,data:c.data}),console.log(c)},2e3)},error:function(){console.log("%cerror","background: red; color: white;")}})},b.attachedCallback=function(){console.log("attachedCallback")},document.registerElement("tag-table",{prototype:b})}};Table.init();